{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\91809\\\\Desktop\\\\AstroSAT-Visualization-Tool\\\\src\\\\components\\\\Aladin\\\\Aladin.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport axios from \"axios\";\nimport { renderToString } from \"react-dom/server\";\nimport jsPDF from \"jspdf\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Prints = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n    children: /*#__PURE__*/_jsxDEV(\"center\", {\n      children: \" AstroSAT Visualizer Report\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n    style: {\n      textDecoration: \"underline\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"strong\", {\n      children: \"General Information\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 16,\n    columnNumber: 5\n  }, this), \"Object Name: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 17,\n    columnNumber: 18\n  }, this), \"ra: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 18,\n    columnNumber: 9\n  }, this), \"dec: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 19,\n    columnNumber: 10\n  }, this), \"Proposal ID: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 18\n  }, this), \"Target ID: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 16\n  }, this), \"Date Observed: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 20\n  }, this), \"Time Observed: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 23,\n    columnNumber: 20\n  }, this), \"Observation ID: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 24,\n    columnNumber: 21\n  }, this), \"Instrument: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 17\n  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n    style: {\n      textDecoration: \"underline\",\n      margin: \"20%\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"strong\", {\n      children: \"Publication Details\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\xA0\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n    children: [/*#__PURE__*/_jsxDEV(\"li\", {\n      children: \"pub1\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n      children: \"pub2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 9,\n  columnNumber: 3\n}, this);\n\n_c = Prints;\n\nconst Aladin = props => {\n  _s();\n\n  // function for connecting the API endpoints\n  const sendHttpRequest = (method, url, data) => {\n    return fetch(url, {\n      method: method,\n      body: JSON.stringify(data),\n      headers: data ? {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      } : {}\n    }).then(response => {\n      if (response.status >= 400) {\n        // !response.ok\n        return response.json().then(errResData => {\n          const error = new Error(\"Something went wrong!\");\n          error.data = errResData;\n          throw error;\n        });\n      }\n\n      return response.json();\n    });\n  };\n\n  const [cardData, setCardData] = useState([]);\n\n  function handlePopout(ra, dec, name, astrosat) {\n    var object_title = name;\n    var genericDesc = `<b>AstroSat Observation:</b> ${astrosat}<br>`;\n    var modal_description;\n\n    const print = () => {\n      console.log(\"function called\");\n      const string = renderToString( /*#__PURE__*/_jsxDEV(Prints, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 37\n      }, this));\n      const pdf = new jsPDF(\"p\", \"mm\", \"a4\");\n      pdf.html(string, {\n        callback: function (pdf) {\n          pdf.save();\n        },\n        x: 10,\n        y: 10\n      });\n    };\n\n    if (astrosat) {\n      var ra_data = {\n        \"ra\": ra,\n        \"dec\": dec\n      };\n      var cards = null;\n      var publicationList;\n      var object_description;\n      sendHttpRequest(\"POST\", \"http://127.0.0.1:8000/isro/card/\", ra_data).then(responseData => {\n        //console.log(responseData);\n        cards = responseData.pubs;\n        console.log(cards);\n      });\n\n      if (cards == null) {\n        publicationList = \"No publications available for the source.\";\n      } else {\n        var pubListHtml = cards.map(publication => `<li><a href=\"${publication.link}\">${publication.title}</a><li>`);\n        publicationList = pubListHtml.join('');\n      }\n\n      modal_description = `<script>var modal=document.getElementById(\"myModal\");var btn=document.getElementById(\"myBtn\");var span=document.getElementsByClassName(\"close\")[0];function handleClick(){modal.style.display=\"block\";}function handleClose(){modal.style.display=\"none\";}window.onclick=function(event){if(event.target==modal){modal.style.display=\"none\";}} function demoFromHTML(){var pdf=new window.jsPDF('p','pt','letter');source=$('#modal-body')[0];specialElementHandlers={'#bypassme':function(element,renderer){return true}};margins={top:80,bottom:60,left:40,width:522};pdf.fromHTML(source,margins.left,margins.top,{'width':margins.width,'elementHandlers':specialElementHandlers},function(dispose){pdf.save('Test.pdf');},margins);}</script> <button id=\"myBtn\" onclick=\"handleClick()\">More Info</button><div id=\"myModal\" class=\"modal\" style=\"display: none; position: fixed; z-index: 1;padding-top: 100px;left: 0;top: 0;width: 100%; height: 100%; overflow: auto; background-color: rgb(0,0,0); background-color: rgba(0,0,0,0.4);\"><div class=\"modal-content\" style=\"position: relative;background-color:#fefefe;margin:auto;padding:0;border:1px solid #888;width:80%;box-shadow:0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);\"><div class=\"modal-header\" style=\"padding: 2px 16px;background-color:#91a3b0;color:white;\"> <span class=\"close\" style=\"color: white;float:right;font-size:28px;font-weight:bold;\" onclick=\"handleClose()\">&times;</span><h2>${name}</h2></div><div class=\"modal-body\" style=\"padding: 2px 16px;\"><h2><strong>AstroSAT Visualizer Object Report</strong></h2><p style=\"text-align: left;\"><strong>General Information</strong></p><ul><li style=\"text-align: left;\">Source Name:</li><li style=\"text-align: left;\">ra:</li><li style=\"text-align: left;\">dec:&nbsp;</li><li style=\"text-align: left;\">Date Observed:&nbsp;</li><li style=\"text-align: left;\">Time Observed:&nbsp;</li><li style=\"text-align: left;\">Proposal ID:</li><li style=\"text-align: left;\">Target ID:</li><li style=\"text-align: left;\">Observation ID:</li><li style=\"text-align: left;\">Instrument:</li></ul><p style=\"text-align: left;\"><strong>Publications List</strong></p><ol><li style=\"text-align: left;\">lol</li><li style=\"text-align: left;\">lol2</li></ol></div><div> <button =\"demoFromHTML()\">print</button></div></div></div>`;\n    }\n\n    object_description = astrosat ? genericDesc.concat(modal_description) : genericDesc;\n    return window.A.marker(ra, dec, {\n      popupTitle: object_title,\n      popupDesc: object_description\n    });\n  }\n\n  useEffect(() => {\n    let aladin = window.A.aladin(\"#aladin-lite-div\", {\n      survey: \"P/DSS2/color\",\n      fov: 60\n    });\n    let markerLayer = window.A.catalog();\n    aladin.addCatalog(markerLayer);\n    var sources = props.data.map(dataset => handlePopout(dataset.ra, dataset.dec, dataset.name, dataset.astrosat));\n    markerLayer.addSources(sources);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"aladin-lite-div\",\n    style: {\n      width: \"74vw\",\n      height: \"80vh\"\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Aladin, \"XmNYluIuFUvbwBVYvvdiCjEKNXc=\");\n\n_c2 = Aladin;\nexport default Aladin;\n/* \r\n<script>\r\n\tvar modal=document.getElementById(\"myModal\");var btn=document.getElementById(\"myBtn\");var span=document.getElementsByClassName(\"close\")[0];function handleClick(){modal.style.display=\"block\";} function handleClose(){modal.style.display=\"none\";} window.onclick=function(event){if(event.target==modal){modal.style.display=\"none\";}}\r\n  function demoFromHTML() {\r\n        var pdf = new window.jsPDF('p', 'pt', 'letter');\r\n        source = $('#modal-body')[0];\r\n\r\n        specialElementHandlers = {\r\n            // element with id of \"bypass\" - jQuery style selector\r\n            '#bypassme': function (element, renderer) {\r\n                return true\r\n            }\r\n        };\r\n        margins = {\r\n            top: 80,\r\n            bottom: 60,\r\n            left: 40,\r\n            width: 522\r\n        };\r\n        pdf.fromHTML(\r\n            source,\r\n            margins.left, \r\n            margins.top, {\r\n                'width': margins.width, \r\n                'elementHandlers': specialElementHandlers\r\n            },\r\n\r\n            function (dispose) {\r\n                pdf.save('Test.pdf');\r\n            }, margins\r\n        );\r\n    }\r\n  </script>\r\n<button id=\"myBtn\" onclick=\"handleClick()\">More Info</button>\r\n<div id=\"myModal\" class=\"modal\" style=\"display: none; position: fixed; z-index: 1;padding-top: 100px;left: 0;top: 0;width: 100%; height: 100%; overflow: auto; background-color: rgb(0,0,0); background-color: rgba(0,0,0,0.4);\">\r\n\t<div class=\"modal-content\" style=\"position: relative;background-color:#fefefe;margin:auto;padding:0;border:1px solid #888;width:80%;box-shadow:0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);\">\r\n\t\t<div class=\"modal-header\" style=\"padding: 2px 16px;background-color:#91a3b0;color:white;\"> <span class=\"close\" style=\"color: white;float:right;font-size:28px;font-weight:bold;\" onclick=\"handleClose()\">&times;</span>\r\n\t\t\t<h2>${name}</h2>\r\n\t\t</div>\r\n\t\t<div class=\"modal-body\" style=\"padding: 2px 16px;\">\r\n\t\t\t<h2><strong>AstroSAT Visualizer Object Report</strong></h2>\r\n<p style=\"text-align: left;\"><strong>General Information</strong></p>\r\n<ul>\r\n<li style=\"text-align: left;\">Source Name:</li>\r\n<li style=\"text-align: left;\">ra:</li>\r\n<li style=\"text-align: left;\">dec:&nbsp;</li>\r\n<li style=\"text-align: left;\">Date Observed:&nbsp;</li>\r\n<li style=\"text-align: left;\">Time Observed:&nbsp;</li>\r\n<li style=\"text-align: left;\">Proposal ID:</li>\r\n<li style=\"text-align: left;\">Target ID:</li>\r\n<li style=\"text-align: left;\">Observation ID:</li>\r\n<li style=\"text-align: left;\">Instrument:</li>\r\n</ul>\r\n<p style=\"text-align: left;\"><strong>Publications List</strong></p>\r\n<ol>\r\n<li style=\"text-align: left;\">lol</li>\r\n<li style=\"text-align: left;\">lol2</li>\r\n</ol>\r\n\t\t</div>\r\n\t\t<div>\r\n\t\t\t<button =\"javascript:demoFromHTML();\">print</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n*/\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Prints\");\n$RefreshReg$(_c2, \"Aladin\");","map":{"version":3,"sources":["C:/Users/91809/Desktop/AstroSAT-Visualization-Tool/src/components/Aladin/Aladin.jsx"],"names":["React","useEffect","useState","Button","axios","renderToString","jsPDF","Prints","textDecoration","margin","Aladin","props","sendHttpRequest","method","url","data","fetch","body","JSON","stringify","headers","then","response","status","json","errResData","error","Error","cardData","setCardData","handlePopout","ra","dec","name","astrosat","object_title","genericDesc","modal_description","print","console","log","string","pdf","html","callback","save","x","y","ra_data","cards","publicationList","object_description","responseData","pubs","pubListHtml","map","publication","link","title","join","concat","window","A","marker","popupTitle","popupDesc","aladin","survey","fov","markerLayer","catalog","addCatalog","sources","dataset","addSources","width","height"],"mappings":"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AO,CAAC1C,EAAT,EAAa0C,OAAO,CAACzC,GAArB,EAA0ByC,OAAO,CAACxC,IAAlC,EAAwCwC,OAAO,CAACvC,QAAhD,CADA,CAAd;AAGAmC,IAAAA,WAAW,CAACK,UAAZ,CAAuBF,OAAvB;AACD,GAXQ,EAWN,EAXM,CAAT;AAaA,sBACE;AACE,IAAA,EAAE,EAAC,iBADL;AAEE,IAAA,KAAK,EAAE;AACLG,MAAAA,KAAK,EAAE,MADF;AAELC,MAAAA,MAAM,EAAE;AAFH;AAFT;AAAA;AAAA;AAAA;AAAA,UADF;AASD,CAjGD;;GAAMlE,M;;MAAAA,M;AAmGN,eAAeA,MAAf;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport axios from \"axios\";\r\nimport { renderToString } from \"react-dom/server\";\r\nimport jsPDF from \"jspdf\";\r\n\r\n\r\nconst Prints = () => (\r\n  <div>\r\n    <h3>\r\n      <center> AstroSAT Visualizer Report</center>\r\n    </h3>\r\n    <span style={{ textDecoration: \"underline\" }}>\r\n      <strong>General Information</strong>\r\n    </span>\r\n    <br />\r\n    Object Name: <br />\r\n    ra: <br />\r\n    dec: <br />\r\n    Proposal ID: <br />\r\n    Target ID: <br />\r\n    Date Observed: <br />\r\n    Time Observed: <br />\r\n    Observation ID: <br />\r\n    Instrument: <br /> \r\n    <span style={{ textDecoration: \"underline\", margin: \"20%\" }}>\r\n      <strong>Publication Details</strong>\r\n    </span>\r\n    <br />\r\n    <div>&nbsp;</div>\r\n    <ul>\r\n      <li>pub1</li>\r\n      <li>pub2</li>\r\n    </ul>\r\n  </div>\r\n);\r\n\r\n\r\nconst Aladin = (props) => {\r\n\r\n  // function for connecting the API endpoints\r\n  const sendHttpRequest = (method, url, data) => {\r\n    return fetch(url, {\r\n      method: method,\r\n      body: JSON.stringify(data),\r\n      headers: data ? { \"Content-Type\": \"application/x-www-form-urlencoded\" } : {},\r\n    }).then((response) => {\r\n      if (response.status >= 400) {\r\n        // !response.ok\r\n        return response.json().then((errResData) => {\r\n          const error = new Error(\"Something went wrong!\");\r\n          error.data = errResData;\r\n          throw error;\r\n        });\r\n      }\r\n      return response.json();\r\n    });\r\n  };\r\n\r\n  const [cardData,setCardData] = useState([]);\r\n\r\n  function handlePopout(ra, dec, name, astrosat) {\r\n    var object_title = name;\r\n    var genericDesc = `<b>AstroSat Observation:</b> ${astrosat}<br>`;\r\n    var modal_description;\r\n\r\n    const print = () => {\r\n      console.log(\"function called\");\r\n      const string = renderToString(<Prints />);\r\n      const pdf = new jsPDF(\"p\", \"mm\", \"a4\");\r\n      pdf.html(string, {\r\n        callback: function (pdf) {\r\n          pdf.save();\r\n        },\r\n        x: 10,\r\n        y: 10\r\n     });\r\n    };\r\n\r\n    if (astrosat) {\r\n      var ra_data = { \"ra\": ra, \"dec\": dec };\r\n      var cards= null;\r\n      var publicationList;\r\n      var object_description\r\n      sendHttpRequest(\"POST\", \"http://127.0.0.1:8000/isro/card/\",ra_data).then(\r\n      (responseData) => { \r\n        \r\n        //console.log(responseData);\r\n        cards = responseData.pubs;\r\n        console.log(cards);\r\n      }\r\n      );\r\n      \r\n      if(cards==null){\r\n        publicationList = \"No publications available for the source.\";\r\n      }\r\n      else{\r\n        var pubListHtml = cards.map((publication)=>`<li><a href=\"${publication.link}\">${publication.title}</a><li>`);\r\n        publicationList = pubListHtml.join('');\r\n      }\r\n\r\n      modal_description = `<script>var modal=document.getElementById(\"myModal\");var btn=document.getElementById(\"myBtn\");var span=document.getElementsByClassName(\"close\")[0];function handleClick(){modal.style.display=\"block\";}function handleClose(){modal.style.display=\"none\";}window.onclick=function(event){if(event.target==modal){modal.style.display=\"none\";}} function demoFromHTML(){var pdf=new window.jsPDF('p','pt','letter');source=$('#modal-body')[0];specialElementHandlers={'#bypassme':function(element,renderer){return true}};margins={top:80,bottom:60,left:40,width:522};pdf.fromHTML(source,margins.left,margins.top,{'width':margins.width,'elementHandlers':specialElementHandlers},function(dispose){pdf.save('Test.pdf');},margins);}</script> <button id=\"myBtn\" onclick=\"handleClick()\">More Info</button><div id=\"myModal\" class=\"modal\" style=\"display: none; position: fixed; z-index: 1;padding-top: 100px;left: 0;top: 0;width: 100%; height: 100%; overflow: auto; background-color: rgb(0,0,0); background-color: rgba(0,0,0,0.4);\"><div class=\"modal-content\" style=\"position: relative;background-color:#fefefe;margin:auto;padding:0;border:1px solid #888;width:80%;box-shadow:0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);\"><div class=\"modal-header\" style=\"padding: 2px 16px;background-color:#91a3b0;color:white;\"> <span class=\"close\" style=\"color: white;float:right;font-size:28px;font-weight:bold;\" onclick=\"handleClose()\">&times;</span><h2>${name}</h2></div><div class=\"modal-body\" style=\"padding: 2px 16px;\"><h2><strong>AstroSAT Visualizer Object Report</strong></h2><p style=\"text-align: left;\"><strong>General Information</strong></p><ul><li style=\"text-align: left;\">Source Name:</li><li style=\"text-align: left;\">ra:</li><li style=\"text-align: left;\">dec:&nbsp;</li><li style=\"text-align: left;\">Date Observed:&nbsp;</li><li style=\"text-align: left;\">Time Observed:&nbsp;</li><li style=\"text-align: left;\">Proposal ID:</li><li style=\"text-align: left;\">Target ID:</li><li style=\"text-align: left;\">Observation ID:</li><li style=\"text-align: left;\">Instrument:</li></ul><p style=\"text-align: left;\"><strong>Publications List</strong></p><ol><li style=\"text-align: left;\">lol</li><li style=\"text-align: left;\">lol2</li></ol></div><div> <button =\"demoFromHTML()\">print</button></div></div></div>`;\r\n    \r\n    }\r\n\r\n    object_description = (astrosat) ? genericDesc.concat(modal_description) : genericDesc;\r\n    \r\n    return window.A.marker(ra, dec, {\r\n      popupTitle: object_title,\r\n      popupDesc: object_description,\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    let aladin = window.A.aladin(\"#aladin-lite-div\", {\r\n      survey: \"P/DSS2/color\",\r\n      fov: 60,\r\n    });\r\n    let markerLayer = window.A.catalog();\r\n    aladin.addCatalog(markerLayer);\r\n    var sources = props.data.map((dataset) =>\r\n      handlePopout(dataset.ra, dataset.dec, dataset.name, dataset.astrosat) \r\n    );\r\n    markerLayer.addSources(sources);\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      id=\"aladin-lite-div\"\r\n      style={{\r\n        width: \"74vw\",\r\n        height: \"80vh\",\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Aladin;\r\n\r\n/* \r\n<script>\r\n\tvar modal=document.getElementById(\"myModal\");var btn=document.getElementById(\"myBtn\");var span=document.getElementsByClassName(\"close\")[0];function handleClick(){modal.style.display=\"block\";} function handleClose(){modal.style.display=\"none\";} window.onclick=function(event){if(event.target==modal){modal.style.display=\"none\";}}\r\n  function demoFromHTML() {\r\n        var pdf = new window.jsPDF('p', 'pt', 'letter');\r\n        source = $('#modal-body')[0];\r\n\r\n        specialElementHandlers = {\r\n            // element with id of \"bypass\" - jQuery style selector\r\n            '#bypassme': function (element, renderer) {\r\n                return true\r\n            }\r\n        };\r\n        margins = {\r\n            top: 80,\r\n            bottom: 60,\r\n            left: 40,\r\n            width: 522\r\n        };\r\n        pdf.fromHTML(\r\n            source,\r\n            margins.left, \r\n            margins.top, {\r\n                'width': margins.width, \r\n                'elementHandlers': specialElementHandlers\r\n            },\r\n\r\n            function (dispose) {\r\n                pdf.save('Test.pdf');\r\n            }, margins\r\n        );\r\n    }\r\n  </script>\r\n<button id=\"myBtn\" onclick=\"handleClick()\">More Info</button>\r\n<div id=\"myModal\" class=\"modal\" style=\"display: none; position: fixed; z-index: 1;padding-top: 100px;left: 0;top: 0;width: 100%; height: 100%; overflow: auto; background-color: rgb(0,0,0); background-color: rgba(0,0,0,0.4);\">\r\n\t<div class=\"modal-content\" style=\"position: relative;background-color:#fefefe;margin:auto;padding:0;border:1px solid #888;width:80%;box-shadow:0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);\">\r\n\t\t<div class=\"modal-header\" style=\"padding: 2px 16px;background-color:#91a3b0;color:white;\"> <span class=\"close\" style=\"color: white;float:right;font-size:28px;font-weight:bold;\" onclick=\"handleClose()\">&times;</span>\r\n\t\t\t<h2>${name}</h2>\r\n\t\t</div>\r\n\t\t<div class=\"modal-body\" style=\"padding: 2px 16px;\">\r\n\t\t\t<h2><strong>AstroSAT Visualizer Object Report</strong></h2>\r\n<p style=\"text-align: left;\"><strong>General Information</strong></p>\r\n<ul>\r\n<li style=\"text-align: left;\">Source Name:</li>\r\n<li style=\"text-align: left;\">ra:</li>\r\n<li style=\"text-align: left;\">dec:&nbsp;</li>\r\n<li style=\"text-align: left;\">Date Observed:&nbsp;</li>\r\n<li style=\"text-align: left;\">Time Observed:&nbsp;</li>\r\n<li style=\"text-align: left;\">Proposal ID:</li>\r\n<li style=\"text-align: left;\">Target ID:</li>\r\n<li style=\"text-align: left;\">Observation ID:</li>\r\n<li style=\"text-align: left;\">Instrument:</li>\r\n</ul>\r\n<p style=\"text-align: left;\"><strong>Publications List</strong></p>\r\n<ol>\r\n<li style=\"text-align: left;\">lol</li>\r\n<li style=\"text-align: left;\">lol2</li>\r\n</ol>\r\n\t\t</div>\r\n\t\t<div>\r\n\t\t\t<button =\"javascript:demoFromHTML();\">print</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n*/"]},"metadata":{},"sourceType":"module"}